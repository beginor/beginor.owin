using Castle.MicroKernel.Registration;
using Castle.Windsor;
using Castle.Windsor.Installer;
using NUnit.Framework;

namespace LogTestApp {

    //[TestFixture]
    public abstract class WindsorTest {

        private IWindsorContainer container;

        protected IWindsorContainer Container {
            get { return container; }
        }

        [SetUp]
        public virtual void SetUp() {
            container = new WindsorContainer();
            container.Install(
                Configuration.FromXmlFile("windsor.config")
            );
            container.Register(
                Component.For<IWindsorContainer>().Instance(container)
                );
        }

        [Test]
        public void TestConfig() {
            Assert.IsNotNull(container);
        }
    }

    public abstract class WindsorTest<TTarget> : WindsorTest {

        public TTarget Target { get; set; }

        public override void SetUp() {
            base.SetUp();
            Target = Container.Resolve<TTarget>();
        }

    }

}